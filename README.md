# tszx_fusai

#### 介绍
**本项目是参加天数智芯大赛获得优秀奖的作品，主要是基于Gitee Ai平台进行开发。**  
当前的中医领域正面临着多重挑战：从行业人才的严重短缺，到设备技术的滞后。而且，随着现代社会对健康需求的不断增长，许多中医师承受着巨大的压力。因此，我们的‘新时代老中医’项目应运而生，旨在通过技术创新应对这些挑战，为大家提供一个更高效、更智能、更个性化的中医诊断、健康管理和中医传播平台。

#### 环境配置
1.  **安装FFmpeg**  
以下是在一些常见操作系统上安装FFmpeg的基本步骤：  
**Windows**  
下载FFmpeg: 访问FFmpeg的官方网站或GitHub页面，下载适用于Windows的预编译二进制文件。  
解压: 下载完成后，解压到你选择的目录。  
添加到环境变量: 将FFmpeg的bin目录添加到你的系统环境变量中，这样你就可以在任何地方通过命令行调用FFmpeg。  
**macOS**  
使用Homebrew: 如果你安装了Homebrew，可以通过以下命令安装FFmpeg：  
bash  
brew install ffmpeg  
手动下载: 你也可以从FFmpeg官网下载适用于macOS的预编译二进制文件，然后解压并将其添加到你的PATH环境变量中。  
**Linux (Ubuntu/Debian)**  
使用包管理器:  
bash  
sudo apt update  
sudo apt install ffmpeg  
从源代码编译: 如果你想要安装最新版本的FFmpeg或者需要自定义配置，你可以从源代码编译。首先，你需要安装编译工具和依赖：  
bash  
sudo apt install build-essential yasm pkg-config  
sudo apt install libx264-dev libx265-dev libvpx-dev libmp3lame-dev libopus-dev  
sudo apt install libass-dev libfreetype6-dev libtheora-dev libvorbis-dev libvpx-dev  
sudo apt install libxvidcore-dev libx264-dev libx265-dev  
然后下载FFmpeg源代码，解压并编译：  
bash  
git clone https://github.com/FFmpeg/FFmpeg.git  
cd FFmpeg  
./configure  
make  
sudo make install  
**验证安装**
无论在哪个系统上，你都可以在命令行中输入以下命令来验证FFmpeg是否安装成功：  
bash  
ffmpeg -version  
如果安装成功，你将看到FFmpeg的版本信息。  
2.  **安装Python**
Python>=3.8
3.  **安装依赖**
pip install -r requirements.txt
4.  **运行项目**
python app.py

#### 功能介绍

1.  **问诊功能**
首先我们的问诊功能通过结合中医的望、闻、问三诊，利用多模态和语言大模型技术，融合了对三诊的深度分析。能为用户提供全面精准的中医诊疗建议和健康指导，适合个人和医疗专业人士使用。
2.  **养生建议生成**
其次，在当今社会，人们对养生的关注度越来越高，都渴望获得专业且实用的养生建议。我们的项目通过收集知乎、华夏中医养生论坛等专业平台的养生知识，建立养生秘籍数据库。利用语义匹配和RAG技术，能更加高效的提供个性化养生建议。
3.  **中草药讲解**
然后，针对传统医学知识流式的问题，我们利用SD模型的图像生成和浦语模型的文本创作功能，为用户提供了对应详细的中草药信息。当用户查询某种中草药时，我们不仅能展示草药图片，还能提供详细的药材信息，从而帮助保护和传承宝贵的中医药知识。
4.  **心率检测**
最后，由于我们的应用无法直接进行切诊，所以我们采用心率健康检测技术来部分代替，通过摄像头捕捉皮肤微血管中的心跳微振动，实现非接触式心率测量，误差控制在3次以内。这种方法可以间接反映脉搏情况，辅助中医诊断，虽不能直接切诊，但却是提供了一种有效的替代方案。

#### 使用说明

1.  **问诊功能**
首先是我们的望诊功能，让用户上传图像，通过图像转换、归一化和分块处理，再利用模型进行识别和分析，提供面部、舌象和眼睛等中医诊断建议。  
然后是我们的闻诊功能，让用户上传音频，通过特征提取技术对呼吸和声音信号进行分析，基于分析结果提供中医诊断建议。  
最后是我们的问诊，这就是根据用户输入的症状和病情，然后调用模型接收信息并给出相应的病情分析。
2.  **养生建议生成**
用户通过输入想要感兴趣的养生方面，我们先通过整合专家养生建议，利用RAG增强技术和大模型相结合，可以更加快速且有效的进行回答，特别是在处理与语境相关的任务时，这使得我们可以进行个性化的回答。
3.  **中草药讲解**
然后我们介绍中草药知识传播功能，在用户输入草药名称时，利用sd模型生成对应的图片，同时依靠浦语模型广大的知识库储备给出草药的详细信息，利用图文结合的形式让用户能够更加详细的认识到中草药，从而传播中草药知识。
4.  **心率检测**
最后我们介绍心率检测功能，在用户输入视频时，我们利用OpenCV和Dlib技术对视频中的面部特征进行精准提取。随后，信号经过滤波处理，采用快速傅里叶变换（FFT）分析频率成分，进而计算并可视化心率数据。

#### 免责声明

本项目仅用于学习和研究目的，不应用于任何商业用途。在使用本项目时，请确保遵守相关法律法规，并尊重知识产权。我们不对因使用本项目而产生的任何后果负责。

#### 视频演示

https://www.bilibili.com/video/BV1NKxFecEZ7/?spm_id_from=333.999.0.0